{{define "body"}}
<div>
  {{if not .HasAccess}}
  <div>{{template "deck-access-form" .}}</div>
  {{else}}
  <h3>Deck: {{.Deck.Name}}</h3>
  <div>{{template "deck-update-dialog" .}}</div>
  <button
    hx-delete="/api/deck/{{.Deck.Id}}"
    hx-confirm="Are you sure you want to delete this deck?"
  >
    Delete Deck
  </button>
  <br />
  <div>{{template "card-create-dialog" .}}</div>
  <br />
  {{$cardCount := len .Cards}} {{if gt $cardCount 0}}
  <h3>Cards in Deck</h3>
  <form>
    <input
      type="text"
      id="cardDeckId"
      name="deckId"
      value="{{.Deck.Id}}"
      hidden
    />
    <input
      type="search"
      id="cardSearch"
      name="search"
      maxlength="255"
      placeholder="Search..."
      autocomplete="off"
      hx-post="/api/card/search"
      hx-trigger="input changed delay:500ms, search"
      hx-target="#card-table-rows"
    />
  </form>
  <table>
    <thead>
      <tr>
        <th>Created</th>
        <th>Type</th>
        <th>Text</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody id="card-table-rows">
      {{template "card-table-rows" .Cards}}
    </tbody>
  </table>
  {{end}} {{end}}
</div>
{{end}}
