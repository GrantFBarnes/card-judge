{{define "body"}}
<script src="/static/js/lobby.js"></script>
<link rel="stylesheet" href="/static/css/lobby.css" />
<div id="lobby-grid-container">
  <div
    id="lobby-game-info"
    hx-get="/api/lobby/{{.Lobby.Id}}/game-info"
    hx-trigger="load, every 30s"
  ></div>
  <div
    id="lobby-player-data"
    hx-get="/api/player/{{.PlayerId}}/player-data"
    hx-trigger="load"
  ></div>
  <div id="lobby-board">Board</div>
  <div
    id="lobby-game-stats"
    hx-get="/api/lobby/{{.Lobby.Id}}/game-stats"
    hx-trigger="load, every 30s"
  ></div>
  <div id="lobby-chat">
    <div id="lobby-chat-messages"></div>
    <form id="lobby-chat-form">
      <input
        id="lobby-chat-input"
        type="text"
        maxlength="255"
        placeholder="Send a message..."
      />
      <input id="lobby-chat-submit" type="submit" value="Send" />
    </form>
  </div>
</div>
<dialog id="lobby-update-dialog">
  <div style="display: grid; grid-auto-flow: column">
    <div>
      <h3>Edit Lobby</h3>
    </div>
    <div>
      <div
        class="close-button"
        onclick="document.getElementById('lobby-update-dialog').close()"
      >
        &#10060;
      </div>
    </div>
  </div>
  <form hx-put="/api/lobby/{{.Lobby.Id}}/name" hx-target="find .htmx-result">
    <h3>Set Lobby Name</h3>
    <label for="setLobbyName">New Name:</label>
    <input
      type="text"
      id="setLobbyName"
      name="name"
      maxlength="255"
      placeholder="Enter Name"
      required="true"
      autocomplete="off"
    />
    <br />
    <br />
    <div class="htmx-result"></div>
    <input type="submit" value="Set Lobby Name" />
  </form>
  <form
    hx-put="/api/lobby/{{.Lobby.Id}}/password"
    hx-target="find .htmx-result"
  >
    <h3>Set Lobby Password</h3>
    <label for="newLobbyPassword">New Password:</label>
    <input
      type="password"
      id="newLobbyPassword"
      name="password"
      maxlength="255"
      placeholder="Enter Password"
      autocomplete="new-password"
    />
    <br />
    <label for="newLobbyPasswordConfirm">Confirm New Password:</label>
    <input
      type="password"
      id="newLobbyPasswordConfirm"
      name="passwordConfirm"
      maxlength="255"
      placeholder="Enter Password"
      autocomplete="off"
    />
    <br />
    <br />
    <div class="htmx-result"></div>
    <input type="submit" value="Set Lobby Password" />
  </form>
  <form
    hx-put="/api/lobby/{{.Lobby.Id}}/hand-size"
    hx-target="find .htmx-result"
  >
    <h3>Set Lobby Hand Size</h3>
    <label for="setLobbyHandSize">New Hand Size:</label>
    <input
      type="number"
      id="setLobbyHandSize"
      name="handSize"
      min="1"
      max="16"
      value="8"
      required="true"
      autocomplete="off"
    />
    <br />
    <br />
    <div class="htmx-result"></div>
    <input type="submit" value="Set Lobby Hand Size" />
  </form>
</dialog>
{{end}}
