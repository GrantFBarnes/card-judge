{{define "body"}}
<h2>Manage User Account</h2>
<table>
    <tbody>
        <tr>
            <td>Name:</td>
            <td>
                <form
                    hx-put="/api/user/{{.User.Id}}/name"
                    hx-target="find .htmx-result"
                    hx-trigger="change"
                >
                    <div class="form-input">
                        <input
                            type="text"
                            name="name"
                            maxlength="255"
                            placeholder="Enter Name"
                            value="{{.User.Name}}"
                            required="required"
                            autocomplete="off"
                        />
                    </div>
                    <div class="htmx-result"></div>
                </form>
            </td>
        </tr>
        <tr>
            <td>Theme:</td>
            <td>
                <form
                    hx-put="/api/user/{{.User.Id}}/color-theme"
                    hx-target="find .htmx-result"
                    hx-trigger="change"
                >
                    <div class="form-input">
                        <select
                            name="colorTheme"
                            required="required"
                            autocomplete="off"
                        >
                            <option
                                value="dark-theme"
                                {{if or (not .User.ColorTheme.Valid) (eq .User.ColorTheme.String "dark-theme")}}
                                selected
                                {{end}}
                            >
                                Dark
                            </option>
                            <option
                                value="light-theme"
                                {{if eq .User.ColorTheme.String "light-theme"}}
                                selected
                                {{end}}
                            >
                                Light
                            </option>
                            <option
                                value="nord-polar-night-theme"
                                {{if eq .User.ColorTheme.String "nord-polar-night-theme"}}
                                selected
                                {{end}}
                            >
                                Nord Polar Night
                            </option>
                            <option
                                value="dracula-theme"
                                {{if eq .User.ColorTheme.String "dracula-theme"}}
                                selected
                                {{end}}
                            >
                                Dracula
                            </option>
                            <option
                                value="purple-theme"
                                {{if eq .User.ColorTheme.String "purple-theme"}}
                                selected
                                {{end}}
                            >
                                Purple
                            </option>
                            <option
                                value="tokyo-night-dark-theme"
                                {{if eq .User.ColorTheme.String "tokyo-night-dark-theme"}}
                                selected
                                {{end}}
                            >
                                Tokyo Night Dark
                            </option>
                            <option
                                value="gruvbox-dark-theme"
                                {{if eq .User.ColorTheme.String "gruvbox-dark-theme"}}
                                selected
                                {{end}}
                            >
                                GruvBox Dark
                            </option>
                            <option
                                value="gruvbox-light-theme"
                                {{if eq .User.ColorTheme.String "gruvbox-light-theme"}}
                                selected
                                {{end}}
                            >
                                GruvBox Light
                            </option>
                        </select>
                    </div>
                    <div class="htmx-result"></div>
                </form>
            </td>
        </tr>
    </tbody>
</table>
<br />
<details>
    <summary>Change Password</summary>
    <form
        hx-put="/api/user/{{.User.Id}}/password"
        hx-target="find .htmx-result"
    >
        <div class="form-input">
            <label for="newUserPassword">New Password</label>
            <input
                type="password"
                id="newUserPassword"
                name="password"
                maxlength="255"
                placeholder="Enter Password"
                required="required"
                autocomplete="new-password"
            />
            <label for="newUserPasswordConfirm">Confirm New Password</label>
            <input
                type="password"
                id="newUserPasswordConfirm"
                name="passwordConfirm"
                maxlength="255"
                placeholder="Enter Password"
                required="required"
                autocomplete="off"
            />
        </div>
        <div class="htmx-result"></div>
        <input
            type="submit"
            value="Change Password"
        />
    </form>
</details>
<br />
<details style="margin-top: 30px; border: 2px solid #dc3545; border-radius: 8px; padding: 15px; background-color: #fff5f5;">
    <summary style="color: #dc3545; font-weight: bold; cursor: pointer; font-size: 16px;">
        <span class="bi bi-exclamation-triangle-fill"></span>
        Danger Zone
    </summary>
    <br />
    <p style="color: #721c24; margin-bottom: 15px;">
        Warning: This action cannot be undone. Deleting your account will permanently remove all your data.
    </p>
    <button
        hx-delete="/api/user/{{.User.Id}}"
        hx-confirm="Are you sure you want to delete your user account?"
        style="background-color: #dc3545; color: white; border: none; padding: 10px 20px; font-weight: bold;"
    >
        <span class="bi bi-trash"></span>
        Delete User Account
    </button>
</details>
{{end}}